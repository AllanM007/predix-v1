<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <title>Predix | Positions</title>
  </head>
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
      border-radius: 20px;
    }

    td,
    th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }

    .stakeButton {
      border: 1px solid #333366;
      padding: 4px;
      border-radius: 20px;
    }
  </style>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">Predix</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/price-feeds">Prices</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/reserve-feeds">Reserves</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/positions">Positions</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div style="text-align: center">
      <h3>Active Positions</h3>
    </div>

    <div style="justify-content: center">
      <table>
        <tr>
          <th>Id</th>
          <th>Pair</th>
          <th>Exchange Rate</th>
          <th>Proposers</th>
          <th>Prop Stake</th>
          <th>Opposers</th>
          <th>Opp Stake</th>
          <th>Action</th>
        </tr>
        <tr>
          <td>1</td>
          <td>BTC/USD</td>
          <td>26,450.90/1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>
            <button
              class="stakeButton"
              onclick="location.href=`/update-position/0xE887312c0595a10aC88e32ebb8e9F660Ad9aB7F7`"
            >
              Stake
            </button>
          </td>
        </tr>
        <tr>
          <td>2</td>
          <td>ETH/USD</td>
          <td>2,000/1</td>
          <td><span id="prop"></span></td>
          <td><span id="propStake"></span></td>
          <td><span id="opp"></span></td>
          <td><span id="oppStake"></span></td>
          <td>
            <button
              class="stakeButton"
              onclick="location.href=`/update-position/0x603BD78e189AD028Ee5Ef73f50c4dfC0Fb29b3a3`"
            >
              Stake
            </button>
          </td>
        </tr>
        <tr>
          <td>3</td>
          <td>LINK/USD</td>
          <td>5.985/1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>
            <button
              class="stakeButton"
              onclick="location.href=`/update-position/0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD`"
            >
              Stake
            </button>
          </td>
        </tr>
      </table>
    </div>
  </body>
  <script type="module" src="../js/fetchFeeds.js"></script>
  <script>
    if (
      localStorage.getItem("opp") === null ||
      localStorage.getItem("oppStake") === null ||
      localStorage.getItem("prop") === null ||
      localStorage.getItem("propStake") === null
    ) {
      localStorage.setItem("opp", 0);
      localStorage.setItem("oppStake", 0);
      localStorage.setItem("prop", 0);
      localStorage.setItem("propStake", 0);
    } else if (
      localStorage.getItem("opp") == 0 ||
      localStorage.getItem("oppStake") == 0 ||
      localStorage.getItem("prop") == 0 ||
      localStorage.getItem("propStake") == 0
    ) {
      localStorage.setItem("opp", 0);
      localStorage.setItem("oppStake", 0);
      localStorage.setItem("prop", 1);
      localStorage.setItem("propStake", 0.0001);
    }

    document.getElementById("prop").innerHTML = localStorage.getItem("prop");
    document.getElementById("propStake").innerHTML =
      localStorage.getItem("propStake");
    document.getElementById("opp").innerHTML = localStorage.getItem("opp");
    document.getElementById("oppStake").innerHTML =
      localStorage.getItem("oppStake");
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"
  ></script>
</html>
